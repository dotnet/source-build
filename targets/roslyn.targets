<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <UsingTask AssemblyFile="$(TasksBinDir)Microsoft.DotNet.SourceBuild.Tasks.dll" TaskName="FixPathSeparator" />

  <Target Name="Restore" BeforeTargets="Build">
    <Exec Command="$(DotNetCommand) restore $(ProjectDirectory)/CLI.sln"
          WorkingDirectory="$(ProjectDirectory)"
          EnvironmentVariables="@(EnvironmentVariables)" />
  </Target>

  <Target Name="FixNuSpecFilePathSeparators" BeforeTargets="Build">
    <FixPathSeparator NuSpecFiles="@(NuSpecFiles)" />
  </Target>

  <Target Name="CopyRoslynSlnFile" BeforeTargets="Restore">
    <ItemGroup>
      <SlnFile Include="$(TargetsDir)/CLI.sln" />
    </ItemGroup>
    <Copy SourceFiles="@(SlnFile)" 
          DestinationFolder="$(ProjectDir)src/roslyn" />
  </Target>
</Project>
