<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectDirectory Condition="'$(PathToRepo)' != ''">$(PathToRepo)</ProjectDirectory>
    <DotnetToolsetInstallOverride Condition="'$(TargetOS)' != 'Windows_NT'">DOTNET_INSTALL_DIR=$(PreBuiltDotnetCliDir) </DotnetToolsetInstallOverride>
    <OverridesForCommands>$(PackagesOverride) $(DotnetToolsetInstallOverride)</OverridesForCommands>
    <SyncCommand>$(PackagesOverride) $(DotnetInstallOverride) $(ProjectDirectory)build$(ShellExtension) -SkipBuild</SyncCommand>
    <BuildArgs>/p:NuGet_Packages=$(PackagesDir)</BuildArgs>
    <SyncCommand Condition="'$(TargetOS)' != 'Windows_NT'">$(OverridesForCommands) $(ProjectDirectory)build$(ShellExtension) --skip-build $(BuildArgs)</SyncCommand>
    <BuildCommand>$(OverridesForCommands) $(ProjectDirectory)/build$(ShellExtension) -Configuration $(Configuration) -SkipTests</BuildCommand>
    <BuildCommand Condition="'$(OS)' != 'Windows_NT'">$(OverridesForCommands) $(ProjectDirectory)/build$(ShellExtension) --configuration $(Configuration) --skip-tests $(BuildArgs)</BuildCommand>
    <PackagesOutput>$(ProjectDirectory)/bin/$(Configuration)/packages</PackagesOutput>
  </PropertyGroup>
</Project>
