From 878f5abc0cfa0e83369abbfcea1ab9aef0067e0a Mon Sep 17 00:00:00 2001
From: Chris Rummel <crummel@microsoft.com>
Date: Wed, 9 Sep 2020 09:55:42 -0500
Subject: [PATCH 17/17] Skip some test projects

---
 eng/Subsets.props                       |  6 ++----
 src/coreclr/src/tools/aot/crossgen2.sln | 20 --------------------
 2 files changed, 2 insertions(+), 24 deletions(-)

diff --git a/eng/Subsets.props b/eng/Subsets.props
index fa72f142f0c..17103c8c611 100644
--- a/eng/Subsets.props
+++ b/eng/Subsets.props
@@ -59,7 +59,7 @@
     <DefaultMonoSubsets Condition="'$(MonoEnableLLVM)' == 'true' and '$(MonoLLVMDir)' == ''">mono.llvm+</DefaultMonoSubsets>
     <DefaultMonoSubsets>$(DefaultMonoSubsets)mono.runtime+mono.corelib+mono.packages</DefaultMonoSubsets>

-    <DefaultLibrariesSubsets>libs.native+libs.ref+libs.src+libs.pretest+libs.packages</DefaultLibrariesSubsets>
+    <DefaultLibrariesSubsets>libs.native+libs.ref+libs.src+libs.packages</DefaultLibrariesSubsets>

     <DefaultInstallerSubsets>corehost+installer.managed+installer.depprojs+installer.pkgprojs+bundles+installers+installer.tests</DefaultInstallerSubsets>
     <DefaultInstallerSubsets Condition="'$(RuntimeFlavor)' == 'Mono'">installer.pkgprojs</DefaultInstallerSubsets>
@@ -153,10 +153,8 @@
   <ItemGroup Condition="$(_subset.Contains('+clr.tools+'))">
     <ProjectToBuild Include="$(CoreClrProjectRoot)src\tools\runincontext\runincontext.csproj;
                              $(CoreClrProjectRoot)src\tools\r2rdump\R2RDump.csproj;
-                             $(CoreClrProjectRoot)src\tools\dotnet-pgo\dotnet-pgo.csproj;
-                             $(CoreClrProjectRoot)src\tools\r2rtest\R2RTest.csproj" Category="clr" BuildInParallel="true" />
+                             $(CoreClrProjectRoot)src\tools\dotnet-pgo\dotnet-pgo.csproj" Category="clr" BuildInParallel="true" />
     <ProjectToBuild Include="$(CoreClrProjectRoot)src\tools\aot\crossgen2\crossgen2.csproj" Category="clr" />
-    <ProjectToBuild Include="$(CoreClrProjectRoot)src\tools\aot\ILCompiler.TypeSystem.ReadyToRun.Tests\ILCompiler.TypeSystem.ReadyToRun.Tests.csproj" Test="true" Category="clr" Condition="'$(__DistroRid)' != 'linux-musl-x64'"/>
   </ItemGroup>

   <ItemGroup Condition="$(_subset.Contains('+clr.packages+'))">
diff --git a/src/coreclr/src/tools/aot/crossgen2.sln b/src/coreclr/src/tools/aot/crossgen2.sln
index e81eae9c024..8d196cb148f 100644
--- a/src/coreclr/src/tools/aot/crossgen2.sln
+++ b/src/coreclr/src/tools/aot/crossgen2.sln
@@ -10,8 +10,6 @@ Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "ILCompiler.ReadyToRun", "IL
 EndProject
 Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "ILCompiler.TypeSystem.ReadyToRun", "ILCompiler.TypeSystem.ReadyToRun\ILCompiler.TypeSystem.ReadyToRun.csproj", "{751583CD-E880-49E1-B3E2-8B1990114CAC}"
 EndProject
-Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "ILCompiler.TypeSystem.ReadyToRun.Tests", "ILCompiler.TypeSystem.ReadyToRun.Tests\ILCompiler.TypeSystem.ReadyToRun.Tests.csproj", "{1043373D-8C14-4224-9E2B-75F0DE645E7E}"
-EndProject
 Global
 	GlobalSection(SolutionConfigurationPlatforms) = preSolution
 		Checked|Any CPU = Checked|Any CPU
@@ -85,24 +83,6 @@ Global
 		{751583CD-E880-49E1-B3E2-8B1990114CAC}.Release|x64.Build.0 = Release|x64
 		{751583CD-E880-49E1-B3E2-8B1990114CAC}.Release|x86.ActiveCfg = Release|x86
 		{751583CD-E880-49E1-B3E2-8B1990114CAC}.Release|x86.Build.0 = Release|x86
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Checked|Any CPU.ActiveCfg = Checked|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Checked|Any CPU.Build.0 = Checked|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Checked|x64.ActiveCfg = Checked|x64
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Checked|x64.Build.0 = Checked|x64
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Checked|x86.ActiveCfg = Checked|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Checked|x86.Build.0 = Checked|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Debug|x64.ActiveCfg = Debug|x64
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Debug|x64.Build.0 = Debug|x64
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Debug|x86.ActiveCfg = Debug|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Debug|x86.Build.0 = Debug|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Release|Any CPU.Build.0 = Release|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Release|x64.ActiveCfg = Release|x64
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Release|x64.Build.0 = Release|x64
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Release|x86.ActiveCfg = Release|Any CPU
-		{1043373D-8C14-4224-9E2B-75F0DE645E7E}.Release|x86.Build.0 = Release|Any CPU
 	EndGlobalSection
 	GlobalSection(SolutionProperties) = preSolution
 		HideSolutionNode = FALSE
--
2.18.0

