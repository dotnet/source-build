From 8909f2183dfb47834477b9560556eb02cddb9b2b Mon Sep 17 00:00:00 2001
From: dseefeld <dseefeld@microsoft.com>
Date: Thu, 9 Jan 2020 20:59:16 +0000
Subject: [PATCH] Don't parse optdata package versions when
 __SkipRestoreOptData is set

---
 src/coreclr/build.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/coreclr/build.sh b/src/coreclr/build.sh
index 2dcee27..769c3bb 100755
--- a/src/coreclr/build.sh
+++ b/src/coreclr/build.sh
@@ -88,7 +88,7 @@ restore_optdata()
         fi
     fi
 
-    if [ $__isMSBuildOnNETCoreSupported == 1 ]; then
+    if [[ ( $__SkipRestoreOptData == 0 ) && ( $__isMSBuildOnNETCoreSupported == 1 ) ]]; then
         # Parse the optdata package versions out of msbuild so that we can pass them on to CMake
 
         local PgoDataPackagePathOutputFile="${__IntermediatesDir}/optdatapath.txt"
-- 
1.8.3.1

