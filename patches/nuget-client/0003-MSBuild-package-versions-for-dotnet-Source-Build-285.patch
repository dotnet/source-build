From 33cb69ed20408eb80a86d8c1351047ef0a5c99ce Mon Sep 17 00:00:00 2001
From: Fernando Aguilar <feaguila@microsoft.com>
Date: Thu, 23 May 2019 16:19:55 -0700
Subject: [PATCH] MSBuild package versions for dotnet Source Build (#2857)

Upgraded MSBuild package deps. to 16.x; added dotnet source-build Repo API
---
 build/config.props | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)

diff --git a/build/config.props b/build/config.props
index a5ec763..ccd2d3e 100644
--- a/build/config.props
+++ b/build/config.props
@@ -46,6 +46,26 @@
     <ToolsetTargetBranches Condition="'$(OverrideToolsetTargetBranches)' == ''">master</ToolsetTargetBranches>
   </PropertyGroup>
 
+  <!-- Special project import for dotnet source build
+
+  The dotnet source-build Repo API overrides *PackageVersion properties with versions that were built before.
+  Those paackages are injected in this props file
+
+  See: https://github.com/dotnet/source-build/blob/master/Documentation/auto-dependency-flow/api.md#-pdotnetpackageversionpropspathpath
+  -->
+  <Import Project="$(DotNetPackageVersionPropsPath)" Condition="'$(DotNetPackageVersionPropsPath)' != ''" />
+
+  <!-- Dependency versions -->
+  <PropertyGroup>
+    <NewtonsoftJsonVersionCore Condition="$(NewtonsoftJsonPackageVersion) == ''">9.0.1</NewtonsoftJsonVersionCore>
+    <NewtonsoftJsonVersionCore Condition="$(NewtonsoftJsonPackageVersion) != ''">$(NewtonsoftJsonPackageVersion)</NewtonsoftJsonVersionCore>
+    <XunitVersion>2.4.1</XunitVersion>
+    <TestSDKVersion>15.5.0</TestSDKVersion>
+    <MoqVersion>4.12.0</MoqVersion>
+    <FluentAssertionsVersion>4.19.4</FluentAssertionsVersion>
+    <MicrosoftBuildPackageVersion Condition="$(MicrosoftBuildPackageVersion) == ''">16.0.461</MicrosoftBuildPackageVersion>
+  </PropertyGroup>
+
   <!-- Config -->
   <PropertyGroup>
     <RepositoryName>NuGet</RepositoryName>
-- 
1.8.3.1

